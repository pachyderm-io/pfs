<!-- at the end of the HEAD -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  {% import "partials/language.html" as lang with context %}
  
<style>
.algolia-autocomplete .ds-dropdown-menu {
  width: 700px;
}


.algolia-autocomplete .algolia-docsearch-suggestion--category-header {
  color: #000;
  background: #ECF5F7;
  padding: 10px 20px;
  font-size: 16px !important;
  margin-top: 20px;
  font-weight: bold;
  border-bottom: 0px;
}

.algolia-autocomplete .algolia-docsearch-suggestion--subcategory-column {
  color: #000;
  font-size: 14px !important;
}

.algolia-autocomplete .algolia-docsearch-suggestion--title {
  font-weight: bold;
  color: #000;
  font-size: 14px !important;
}

.algolia-autocomplete .algolia-docsearch-suggestion--text {
  font-size: 14px !important;
  color: #000;
}

.algolia-autocomplete .algolia-docsearch-suggestion--highlight {
  box-shadow: inset 0 -2px 0 0 #000;
  color: #000;
  background: none;
  padding: 0;
}

.algolia-autocomplete .algolia-docsearch-suggestion--text .algolia-docsearch-suggestion--highlight {
  box-shadow: inset 0 -2px 0 0 #000;
  color: #000;
  background: none;
  padding: 0;
}

.algolia-autocomplete .ds-dropdown-menu [class^=ds-dataset-] {
  border-radius: 0px;
  padding: 0;
}

.algolia-autocomplete .algolia-docsearch-suggestion {
  padding: 0;
}

.algolia-autocomplete .ds-dropdown-menu .ds-suggestion.ds-cursor .algolia-docsearch-suggestion:not(.suggestion-layout-simple) .algolia-docsearch-suggestion--content {
  background-color: #FAFAFA;
}

.algolia-autocomplete .ds-dropdown-menu .ds-suggestions {
  margin-top: 0;
}

.algolia-autocomplete .algolia-docsearch-footer--logo {
  display: none;
}

.algolia-autocomplete .algolia-docsearch-suggestion--category-header .algolia-docsearch-suggestion--category-header-lvl0 .algolia-docsearch-suggestion--highlight {
  box-shadow: inset 0 -2px 0 0 #fff;
}

</style>
  <div class="md-search">
    <label class="md-search__overlay" for="__search"></label>
    <div class="md-search__inner" role="search">
        <input type="text" class="md-search__input" name="query" aria-label="{{ lang.t('search.placeholder') }}" placeholder="{{ lang.t('search.placeholder') }}" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" 
        required>
        <label class="md-search__icon md-icon" for="__search">
          {% include ".icons/material/magnify.svg" %}
          {% include ".icons/material/arrow-left.svg" %}
        </label>
       
      </form>
    </div>
  </div>

<!-- at the end of the BODY -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> 
function debounce(fn, delay) {
  var timer = null;
  return function () {
    var context = this, args = arguments;
    clearTimeout(timer);
    timer = setTimeout(function () {
      fn.apply(context, args);
    }, delay);
  };
}
docsearch({
  apiKey: '1c5a1f36b613b96581249c08896a3979',
  indexName: 'pachyderm',
  inputSelector: '.md-search__input',
  algoliaOptions: { 
    'facetFilters': ["version:{{ config.search_index_version }}"],
    hitsPerPage: 10,
    clickAnalytics: true
  },
  queryHook: debounce(function (query) {
    rudderanalytics.track(
      "search",
      {
        term:  query
      }
    );
  }, 3000),
  debug: true
});
</script>
  